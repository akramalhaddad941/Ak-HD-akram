# المرحلة 03: تطوير واجهة المستخدم

تُعد هذه المرحلة حاسمة لنجاح أداة ترجمة الفيديو، حيث تركز على تصميم وتطوير الواجهات التي يتفاعل معها المستخدم مباشرة. الهدف هو توفير تجربة سلسة، بديهية، وجذابة بصريًا، مع ضمان الاستجابة والتكيف مع مختلف الأجهزة والشاشات.

## 1. التصميم الأولي وتجربة المستخدم (UX/UI Design)

تبدأ عملية تطوير واجهة المستخدم بإنشاء تصورات أولية تساعد على تحديد هيكل وتخطيط الواجهات قبل البدء في التطوير الفعلي، مع التركيز على تجربة المستخدم:

*   **Wireframes:** رسومات تخطيطية بسيطة تحدد أماكن العناصر الأساسية في الواجهة دون التركيز على التفاصيل البصرية. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **Mockups:** نماذج أكثر تفصيلاً تظهر الشكل النهائي للواجهة، بما في ذلك الألوان والخطوط والأيقونات، ولكنها لا تكون تفاعلية. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **سهولة الاستخدام:** تصميم واجهات بديهية تقلل من منحنى التعلم وتجعل التفاعل مع الأداة بسيطًا وفعالًا. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **سلاسة الأداء:** ضمان استجابة الواجهة السريعة للأوامر وتقليل أي تأخير في عرض الترجمات أو الاستجابة لتفاعلات المستخدم. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **التعليقات المرئية:** توفير تعليقات مرئية واضحة للمستخدم عند تنفيذ الإجراءات (مثل بدء الترجمة، تغيير الإعدادات). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

## 2. التصميم البصري والاستجابة (Visual Design & Responsiveness)

يلعب التصميم البصري دورًا كبيرًا في جاذبية الأداة واحترافيتها، ويجب أن تتكيف الواجهة مع مختلف أحجام الشاشات والأجهزة:

*   **الألوان:** اختيار لوحة ألوان متناسقة ومريحة للعين، مع مراعاة التباين الكافي لسهولة القراءة. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **الخطوط:** استخدام خطوط واضحة ومقروءة، مع دعم اللغات المختلفة (مثل الخطوط العربية). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **الرسوم:** استخدام أيقونات ورسوم توضيحية بسيطة وواضحة لتعزيز فهم الوظائف. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **السمات والمظاهر:** توفير خيارات لتخصيص السمة (فاتح/غامق/تلقائي) وألوان مخصصة، بالإضافة إلى التحكم في الرسوم المتحركة وشفافية الواجهة. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **تكيف مع مختلف الشاشات:** تصميم الواجهات لتكون متجاوبة وتعمل بشكل جيد على شاشات الكمبيوتر، الأجهزة اللوحية، والهواتف المحمولة (في حال وجود تطبيق جوال أو واجهة ويب متجاوبة). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)
*   **التخطيط المتقدم:** إمكانية ترتيب العناصر عبر السحب والإفلات، ووضع التركيز، ووضع القراءة، وتكبير الواجهة. (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

## 3. تطوير الواجهات الرئيسية

تتضمن هذه المرحلة البناء الفعلي للمكونات المختلفة لواجهة المستخدم باستخدام التقنيات والأطر المحددة:

### 3.1. الواجهة الرئيسية المنبثقة (Popup Interface)

**التعليمات:** قم بتطوير الواجهة المنبثقة (Popup) باستخدام React/Vue/Svelte. يجب أن توفر أزرارًا للتحكم الأساسي (تشغيل/إيقاف الترجمة، اختيار اللغة) وتتفاعل مع `Background Script` عبر نظام الرسائل. يجب أن تستخدم `AppConfig` و `TranslationResult` من `src/types/common.ts`.

**ععدد الملفات المتوقعة: 3-5 ملفات (مثل `src/popup/popup.html`, `src/popup/App.tsx`, `src/popup/components/LanguageSelector.tsx`, `src/popup/styles.css`). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`))

### 3.2. شاشات الإعدادات والخيارات المتنوعة (Options Panel / Settings Dashboard)

**التعليمات:** قم بتطوير لوحة الإعدادات (Options Panel) ولوحة التحكم (Dashboard) باستخدام React/Vue/Svelte. يجب أن توفر تحكمًا شاملاً في جميع الإعدادات المذكورة في قسم "أولويات التنفيذ" ضمن `الهيكل_التنظيمي_الشامل_للمشروع.md`. يجب أن تتفاعل هذه الواجهات مع `StorageAPI` لحفظ واسترجاع الإعدادات، وتستخدم `AppConfig` الموسع.

**عدد الملفات المتوقعة: 15-25 ملفًا (مثل `src/options/options.html`, `src/options/App.tsx`, `src/options/components/GeneralSettings.tsx`, `src/options/components/TranslationSettings.tsx`, `src/options/components/AudioSettings.tsx`, `src/options/components/DisplaySettings.tsx`, `src/options/Dashboard.tsx`, `src/options/styles.css`). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)`)

### 3.3. لوحة التحكم (Settings Dashboard)

**التعليمات:** قم بتطوير لوحة التحكم (Dashboard) لعرض الإحصائيات والتقارير المتعلقة باستخدام الأداة وأدائها. يجب أن تتفاعل مع `StorageAPI` لاسترجاع البيانات الإحصائية، وقد تتطلب واجهات برمجة تطبيقات داخلية إضافية لتوفير بيانات الأداء في الوقت الفعلي.

**عدد الملفات المتوقعة:** 5-10 ملفات (مثل `src/dashboard/index.html`, `src/dashboard/App.tsx`, `src/dashboard/components/UsageStats.tsx`, `src/dashboard/components/PerformanceMetrics.tsx`, `src/dashboard/styles.css`). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

### 3.4. تراكب الترجمات على الفيديو (Content Overlay)

**التعليمات:** قم بتطوير `Content Script` الذي يقوم بحقن `Overlay Manager` في صفحات الويب لعرض الترجمات مباشرة على الفيديو. يجب أن يستخدم `TranslationResult` من `src/types/common.ts`، ويتفاعل مع `Background Script` لتلقي الترجمات. يجب أن يدعم تخصيص العرض (الخط، اللون، الموضع) بناءً على إعدادات المستخدم.

**عدد الملفات المتوقعة:** 4-7 ملفات (مثل `src/content/index.ts`, `src/content/OverlayManager.ts`, `src/content/SubtitleRenderer.ts`, `src/content/VideoDetector.ts`, `src/content/styles.css`). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

## 4. التنفيذ التقني (Technical Implementation)

### التعريفات المطلوبة (Type Definitions):

**التعليمات:** يجب أن تعتمد جميع مكونات واجهة المستخدم على التعريفات الموحدة الموجودة في `src/types/common.ts`. قم بتوسيع هذه التعريفات حسب الحاجة لهذه المرحلة، مع إضافة أي أنواع جديدة ضرورية في ملفات أنواع مخصصة ضمن `src/types/`.

**عدد الملفات المتوقعة:** 0-3 ملفات (يتم الاستيراد من `src/types/common.ts`، أو إضافة ملفات مثل `src/types/ui.ts` و `src/types/settings.ts` إذا لزم الأمر).

```typescript
// أمثلة على التعريفات التي يجب استخدامها/توسيعها من common.ts
import { AppConfig, TranslationResult } from "../../types/common";

// تعريفات إضافية قد تكون مطلوبة في هذه المرحلة (تضاف إلى src/types/ui.ts أو src/types/settings.ts)
export interface UITheme {
  primaryColor: string;
  secondaryColor: string;
  fontFamily: string;
  // ... خصائص أخرى
}

export interface OverlaySettings {
  fontSize: number;
  fontColor: string;
  backgroundColor: string;
  position: "top" | "bottom" | "custom";
  // ... خصائص أخرى
}
```
(مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

### الواجهات البرمجية (Interfaces):

*   يجب أن تتوافق جميع مكونات الواجهة مع مبادئ التصميم الموجه بالمكونات (Component-Based Design).
*   يجب أن تستخدم الواجهات `AppConfig` و `TranslationResult` بشكل فعال.
*   يجب أن تتفاعل الواجهات مع `Internal APIs` (TranslationAPI, AudioAPI, StorageAPI) التي تم تطويرها في المرحلة الثانية.
(مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

### التكامل مع المكونات الأخرى:

**التعليمات:** يجب أن تتكامل واجهة المستخدم بشكل وثيق مع `Background Script` (من المرحلة الأولى) و `Core Translation System` و `Audio Capture System` (من المرحلة الثانية) عبر نظام الرسائل والـ `Internal APIs`. يجب أن تكون قادرة على إرسال طلبات الترجمة، تلقي النتائج، وتحديث الإعدادات.

**عدد الملفات المتوقعة:** 0 (هذا يمثل منهجية تصميم وتفاعل بين المكونات). (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

### قائمة التدقيق التقني (Technical Checklist):

*   جميع مكونات الواجهة تستخدم التعريفات الموحدة من `src/types/common.ts` أو أنواع مخصصة معرفة بوضوح.
*   لا توجد تعريفات مكررة في الملفات.
*   أسماء الخصائص متسقة عبر جميع المكونات.
*   تم استخدام إطار عمل واجهة مستخدم حديث (React/Vue/Svelte).
*   تم تصميم الواجهات لتكون متجاوبة وتوفر تجربة مستخدم جيدة.
*   تم تطبيق نظام رسائل فعال للتواصل بين الواجهة والـ `Background Script`.
*   الكود منظم، قابل للاختبار، ويتبع أفضل الممارسات.
(مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

**الناتج المطلوب:** كود برمجي وظيفي (functional code) لجميع مكونات واجهة المستخدم المذكورة أعلاه، بما في ذلك الواجهة المنبثقة، لوحة الإعدادات، لوحة التحكم، وتراكب المحتوى. يجب أن يكون الكود منظمًا، قابلًا للاختبار، ويتبع أفضل الممارسات في تطوير الواجهة الأمامية. يجب أن يكون كل جزء من الكود موثقًا بشكل جيد، مع أمثلة على كيفية استخدامه. يجب أن تكون الواجهات جاهزة للتكامل والاختبار في المرحلة التالية. **العدد الإجمالي للملفات البرمجية المتوقعة لهذه المرحلة يتراوح بين 27 إلى 47 ملفًا.** (مستخلص من: `المرحلةالثالثةتطويرواجهةالمستخدم..md`)

---
